<UserControl x:Class="Flow.Launcher.Plugin.Codebases.SettingsControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d"
             d:DesignHeight="350" d:DesignWidth="400"
             Padding="10">
    <StackPanel>
        <!-- Editor Selection -->
        <TextBlock Text="Editor" FontWeight="Bold" Margin="0,0,0,5"/>
        <ComboBox x:Name="EditorComboBox"
                  Width="200"
                  HorizontalAlignment="Left"
                  SelectionChanged="EditorComboBox_SelectionChanged"
                  Margin="0,0,0,15">
            <ComboBoxItem Content="Cursor" Tag="Cursor"/>
            <ComboBoxItem Content="VS Code" Tag="VSCode"/>
        </ComboBox>

        <!-- Sort Mode -->
        <TextBlock Text="Sort Order" FontWeight="Bold" Margin="0,0,0,5"/>
        <TextBlock Text="How to order results when no search query is entered"
                   FontSize="11"
                   Foreground="Gray"
                   Margin="0,0,0,5"/>
        <ComboBox x:Name="SortModeComboBox"
                  Width="200"
                  HorizontalAlignment="Left"
                  SelectionChanged="SortModeComboBox_SelectionChanged"
                  Margin="0,0,0,15">
            <ComboBoxItem Content="Last Modified (.git)" Tag="GitModified"/>
            <ComboBoxItem Content="Last Opened" Tag="LastOpened"/>
        </ComboBox>

        <!-- es.exe Path -->
        <TextBlock Text="Everything CLI Path (es.exe)" FontWeight="Bold" Margin="0,0,0,5"/>
        <TextBlock Text="Leave as 'es.exe' if it's in your PATH"
                   FontSize="11"
                   Foreground="Gray"
                   Margin="0,0,0,5"/>
        <Grid Margin="0,0,0,15">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <TextBox x:Name="EsExePathTextBox"
                     Grid.Column="0"
                     TextChanged="EsExePathTextBox_TextChanged"/>
            <Button x:Name="BrowseEsExeButton"
                    Grid.Column="1"
                    Content="Browse..."
                    Padding="10,5"
                    Margin="5,0,0,0"
                    Click="BrowseEsExeButton_Click"/>
        </Grid>

        <!-- Search Paths -->
        <TextBlock Text="Search Paths" FontWeight="Bold" Margin="0,0,0,5"/>
        <TextBlock Text="Directories to search for codebases (one per line)"
                   FontSize="11"
                   Foreground="Gray"
                   Margin="0,0,0,5"/>
        <TextBox x:Name="SearchPathsTextBox"
                 Height="100"
                 AcceptsReturn="True"
                 TextWrapping="Wrap"
                 VerticalScrollBarVisibility="Auto"
                 TextChanged="SearchPathsTextBox_TextChanged"
                 Margin="0,0,0,15"/>

        <!-- Ignored Directories -->
        <TextBlock Text="Ignored Directories" FontWeight="Bold" Margin="0,0,0,5"/>
        <TextBlock Text="Directory names to skip when searching (one per line, e.g., node_modules)"
                   FontSize="11"
                   Foreground="Gray"
                   Margin="0,0,0,5"/>
        <TextBox x:Name="IgnoredDirectoriesTextBox"
                 Height="80"
                 AcceptsReturn="True"
                 TextWrapping="Wrap"
                 VerticalScrollBarVisibility="Auto"
                 TextChanged="IgnoredDirectoriesTextBox_TextChanged"
                 Margin="0,0,0,15"/>

        <!-- Max Results -->
        <TextBlock Text="Maximum Results" FontWeight="Bold" Margin="0,0,0,5"/>
        <TextBlock Text="Maximum number of results to show when query is empty"
                   FontSize="11"
                   Foreground="Gray"
                   Margin="0,0,0,5"/>
        <TextBox x:Name="MaxResultsTextBox"
                 Width="100"
                 HorizontalAlignment="Left"
                 TextChanged="MaxResultsTextBox_TextChanged"
                 Margin="0,0,0,15"/>

        <!-- New Codebase Location -->
        <TextBlock Text="New Codebase Location" FontWeight="Bold" Margin="0,0,0,5"/>
        <TextBlock Text="Where to create new codebases (leave empty to disable)"
                   FontSize="11"
                   Foreground="Gray"
                   Margin="0,0,0,5"/>
        <Grid Margin="0,0,0,15">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <TextBox x:Name="NewCodebaseLocationTextBox"
                     Grid.Column="0"
                     TextChanged="NewCodebaseLocationTextBox_TextChanged"/>
            <Button x:Name="BrowseNewCodebaseLocationButton"
                    Grid.Column="1"
                    Content="Browse..."
                    Padding="10,5"
                    Margin="5,0,0,0"
                    Click="BrowseNewCodebaseLocationButton_Click"/>
        </Grid>

        <!-- Language Cache -->
        <TextBlock Text="Language Cache" FontWeight="Bold" Margin="0,0,0,5"/>
        <TextBlock Text="Re-detect programming languages for all codebases"
                   FontSize="11"
                   Foreground="Gray"
                   Margin="0,0,0,5"/>
        <Button x:Name="RebuildCacheButton"
                Content="Rebuild Language Cache"
                Padding="10,5"
                HorizontalAlignment="Left"
                Click="RebuildCacheButton_Click"/>
    </StackPanel>
</UserControl>
